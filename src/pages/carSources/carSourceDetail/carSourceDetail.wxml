<template name="carSourceDetailDialog">
    <view class="carSourceDetailDialog weui-mask {{ animateCss }}" hidden="{{ !visible }}"></view>
    <view class="carSourceDetailDialog weui-dialog {{ animateCss }}" hidden="{{ !visible }}">
        <view
                class="header"
        >
            <view
                    class="title"
            >
                【{{carModel.officialPriceStr}}】 {{carModel.carModelName}}
            </view>
            <view
                    class="close"
                    bindtap="{{carSourceDetailDialogClose}}"
            >
                <image
                        src="/images/icons/icon_close.png"
                >
                </image>
            </view>
        </view>
        <view
                class="body"
        >
            <view
                    class="first-part"
            >
                <view class="line-item">
                    <view class="line-title">车辆配色:</view>
                    <view class="car-color">{{skuItem.carSku.externalColorName}} / {{skuItem.carSku.internalColorName}} </view>
                </view>
                <view class="line-item">
                    <view class="line-title">车源信息:</view>
                    <view class="basic-infomation">
                        <view wx:if="{{carSourceItem.sourceRegionDesc && carSourceItem.sourceRegionDesc.length}}" class="basic-label">{{carSourceItem.sourceRegionDesc}}</view>
                        <view wx:if="{{carSourceItem.salableRegionsDesc && carSourceItem.salableRegionsDesc.length}}" class="basic-label">{{carSourceItem.salableRegionsDesc}}</view>
                        <view wx:if="{{carSourceItem.procedureTypeDesc && carSourceItem.procedureTypeDesc.length}}" class="basic-label">{{carSourceItem.procedureTypeDesc}}</view>
                        <view
                                wx:if="{{ !(carSourceItem.sourceRegionDesc && carSourceItem.sourceRegionDesc.length) && !(carSourceItem.salableRegionsDesc && carSourceItem.salableRegionsDesc.length) && !(carSourceItem.procedureTypeDesc && carSourceItem.procedureTypeDesc.length) }}"
                                class="basic-label"
                        >
                            暂无
                        </view>
                    </view>
                </view>
                <view
                        wx:if="{{carSourceItem.logistics && carSourceItem.logistics.length > 0}}"
                        class="line-item"
                >
                    <view
                            wx:if="{{carSourceItem.logisticsFree}}"
                            class="line-title"
                    >
                        包   邮   至:
                    </view>
                    <view
                            wx:else
                            class="line-title"
                    >
                        运   费   约: {{carSourceItem.selectedLogistics.logisticsFeeDesc}}
                    </view>

                    <view
                            wx:if="{{ carSourceItem.logisticsType === 'post' }}"
                            class="logistics-list"
                    >
                        <view
                                wx:for="{{carSourceItem.logistics}}"
                                wx:for-item="logisticsItem"
                                wx:for-index="logisticsItemIndex"
                                class="logistics-block {{logisticsItemIndex == carSourceItem.selectedLogisticsIndex? 'selected': ''}}"
                                bindtap="{{carSourceDetailDialogSelectLogisticsBlock}}"
                                data-sku-index="{{skuItemIndex}}"
                                data-sku="{{skuItem}}"
                                data-car-source-index="{{carSourceItemIndex}}"
                                data-car-source="{{carSourceItem}}"
                                data-logistics-index="{{logisticsItemIndex}}"
                                data-logistics="{{logisticsItem}}"
                        >
                            <view class="title">
                                驿站{{carSourceItem.logistics.length > 1? logisticsItemIndex + 1: ''}}
                            </view>
                            <view class="value">
                                {{logisticsItem.name}}
                            </view>
                        </view>
                    </view>
                </view>
                <view
                        wx:if="{{carSourceItem.logistics && carSourceItem.logistics.length > 0}}"
                        class="line-item"
                >
                    <view class="line-title">物流时间:</view>
                    <view class="logistics-information">
                        <view class="logistics-date">
                            {{carSourceItem.selectedLogistics.expectedDeliveryDaysDesc}}
                        </view>
                        <view class="logistics-tips">
                            (物流信息仅供参考)
                        </view>
                    </view>
                </view>
            </view>
            <view
                    class="second-part"
                    bindtap="{{carSourceDetailDialogJumpTo}}"
                    wx:if="{{carSourceItem.viewModelTagCollection.length > 0}}"
            >
                <view
                        class="line-item"
                >
                    <view
                            class="tag-collection"
                    >
                        <view
                                wx:for="{{carSourceItem.viewModelTagCollection}}"
                                class="tag"
                        >
                            {{item}}
                        </view>
                    </view>
                    <image
                            class="icon-dropdownarrow"
                            src="{{hasFoldTagCollection? '/images/icons/icon_dropdownarrow_up_gray.png': '/images/icons/icon_dropdownarrow_down_gray.png'}}"
                    >
                    </image>
                </view>
                <view
                        class="line-item vertical"
                        wx:if="{{hasFoldTagCollection}}"
                >
                    <view
                            class="line-content"
                            wx:if="{{carSourceItem.supplierSelfSupport && carSourceItem.priceFixed}}"
                    >
                        一口价: 70多个品牌全网一口价、所见即所得。承诺无就赔、慢就赔，7天内到货
                    </view>
                    <view
                            class="line-content"
                            wx:if="{{carSourceItem.supplierSelfSupport}}"
                    >
                        垫资拿车: 加盟门店可享支付定金拿车，详情请电话联系
                    </view>
                </view>
            </view>
            <!--wx:if="{{!carSourceItem.supplierSelfSupport}}"-->
            <view
                    class="third-part"
            >
                <view
                        class="line-item"
                        bindtap="{{carSourceDetailDialogSwitchFold}}"
                >
                    <view class="line-title">查看原文</view>

                    <image
                            class="icon-dropdownarrow"
                            src="{{hasFoldOriginalText? '/images/icons/icon_dropdownarrow_up_gray.png': '/images/icons/icon_dropdownarrow_down_gray.png'}}"
                    >
                    </image>
                </view>
                <view
                        wx:if="{{hasFoldOriginalText}}"
                        class="line-item"
                >
                    <view class="line-content">
                        {{carSourceItem.originalText}}

                        <view
                                class="report-error"
                                bindtap="{{carSourceDetailDialogReportError}}"
                        >
                            信息有误
                        </view>
                    </view>
                </view>
            </view>
        </view>
        <view
                class="footer"
        >
            <!-- 供货价格 -->
            <view class = "carSources-section-price">
                <image
                        wx:if="{{ carSourceItem.viewModelDiscount !== 0 }}"
                        class="discount-icon"
                        src="{{ carSourceItem.viewModelDiscount > 0? '/images/icons/icon_price_down.png': '/images/icons/icon_price_up.png'}}"
                >
                </image>
                <view
                        wx:if="{{ carSourceItem.viewModelDiscount !== 0 }}"
                        class="discount"
                >
                    {{ carSourceItem.viewModelDiscountDesc }}元/
                </view>
                <view class="price">{{carSourceItem.viewModelPriceDesc}}</view>
                <view
                        wx:if="{{carSourceItem.supplierSelfSupport}}"
                        class="logistics-information-tips"
                >
                    (含运费)
                </view>
            </view>
            <!--立即订车-->
            <view
                    wx:if="{{carSourceItem.supplierSelfSupport}}"
                    class="button confirm"
                    bindtap="{{carSourceDetailDialogBookCar}}"
                    data-sku-item="{{skuItem}}"
                    data-car-source="{{carSourceItem}}"
            >
                立即定车
            </view>
        </view>
    </view>
</template>